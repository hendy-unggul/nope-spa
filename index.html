<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NOPE</title>
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#000000">
    <style>
        /* ===== RESET & BASE ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            background: #000;
            color: #fff;
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            min-height: 100vh;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }
        /* ===== PAGES ===== */
        .page {
            display: none;
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
            padding: 15px;
            min-height: 100vh;
            padding-bottom: 70px;
        }
        .page.active {
            display: block;
        }
        /* ===== LOGO NOPE ===== */
        .logo {
            font-size: 25px;
            font-weight: 900;
            color: #ff9999;
            margin: 200px 0 0 20px;
            line-height: 1;
            letter-spacing: -3px;
            display: block;
        }
        /* ===== LOGIN STYLE ===== */
        .login-container {
            display: flex;
            flex-direction: column;
            min-height: calc(100vh - 40px);
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        .soul-tagline {
            font-size: 22px;
            font-weight: 700;
            line-height: 1.3;
            color: #fff;
            margin-bottom: 40px;
            max-width: 280px;
        }
        .soul-tagline .highlight {
            color: #4903fc;
            font-weight: 800;
            text-shadow: 0 0 10px rgba(73, 3, 252, 0.3);
        }
        .nope-input {
            width: 100%;
            max-width: 300px;
            background: rgba(20, 20, 20, 0.8);
            border: 1px solid rgba(73, 3, 252, 0.3);
            border-radius: 10px;
            color: white;
            font-size: 16px;
            padding: 16px 20px;
            outline: none;
            font-weight: 400;
            margin-bottom: 15px;
            backdrop-filter: blur(10px);
        }
        .nope-input:focus {
            border-color: #4903fc;
            box-shadow: 0 0 0 2px rgba(73, 3, 252, 0.2);
            background: rgba(30, 30, 30, 0.9);
        }
        .nope-input::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }
        .enter-btn {
            width: 100%;
            max-width: 300px;
            background: linear-gradient(135deg, #4903fc 0%, #7b3fe4 100%);
            border: none;
            color: white;
            font-family: inherit;
            font-size: 16px;
            font-weight: 700;
            padding: 16px;
            border-radius: 10px;
            cursor: pointer;
            margin-top: 10px;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }
        .enter-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(73, 3, 252, 0.3);
        }
        .legal-hint {
            position: absolute;
            bottom: 30px;
            color: rgba(255, 255, 255, 0.2);
            font-size: 10px;
            text-align: center;
            max-width: 300px;
        }
        /* ===== REST OF CSS (JEJAK, JALAN, DUNIA, MODAL, BOTTOM NAV) ===== */
        /* ===== INPUT STYLE ===== */
        .nope-input-original {
            width: 100%;
            background: transparent;
            border: none;
            border-bottom: 1px solid rgba(73, 3, 252, 0.2);
            color: white;
            font-size: 22px;
            text-align: center;
            padding: 10px 0;
            outline: none;
            font-weight: 300;
            margin: 25px 0 15px 0;
        }
        .nope-input-original:focus {
            border-bottom-color: #4903fc;
        }
        /* ===== HINT TEXT ===== */
        .hint {
            text-align: center;
            color: rgba(73, 3, 252, 0.4);
            font-size: 12px;
            margin: 6px 0;
            line-height: 1.4;
        }
        .hint strong {
            color: rgba(73, 3, 252, 0.7);
        }
        /* ===== USER STATUS ===== */
        .user-status {
            text-align: center;
            margin: 10px 0;
            padding: 10px;
            font-size: 13px;
            line-height: 1.4;
            background: rgba(73, 3, 252, 0.05);
            color: rgba(73, 3, 252, 0.7);
            display: none;
            border-radius: 6px;
        }
        .user-status.show {
            display: block;
        }
        /* ===== ACTION BUTTONS ===== */
        .action-btn {
            width: 100%;
            padding: 12px;
            margin: 8px 0;
            background: rgba(73, 3, 252, 0.15);
            border: 1px solid #4903fc;
            color: white;
            font-family: inherit;
            font-size: 16px;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
        }
        .action-btn:hover:not(:disabled) {
            background: rgba(73, 3, 252, 0.25);
            transform: translateY(-2px);
            box-shadow: 0 3px 8px rgba(73, 3, 252, 0.2);
        }
        .action-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }
        .action-btn.secondary {
            background: rgba(73, 3, 252, 0.05);
            border-color: rgba(73, 3, 252, 0.1);
        }
        .action-btn.secondary:hover {
            background: rgba(73, 3, 252, 0.1);
        }
        /* ===== JEJAK PAGE - REVISI ===== */
        /* Artefak Preview - FULL SCREEN */
        .artefak-preview-container {
            margin: 15px 0;
            position: relative;
            width: 100%;
        }
        .artefak-preview {
            width: 100%;
            position: relative;
            background: rgba(73, 3, 252, 0.03);
            border: 1px solid rgba(73, 3, 252, 0.1);
            border-radius: 10px;
            overflow: hidden;
            transition: all 0.3s;
        }
        .artefak-preview-image {
            width: 100%;
            height: 300px;
            background: linear-gradient(135deg, rgba(73, 3, 252, 0.1), rgba(73, 3, 252, 0.1));
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }
        .artefak-preview-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
        }
        /* Notasi "Nobar terakhir sama mantan" di kiri atas */
        .artefak-nobar-badge {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.7);
            border: 1px solid rgba(255, 100, 100, 0.5);
            color: #ff9999;
            font-size: 10px;
            padding: 4px 8px;
            border-radius: 6px;
            z-index: 10;
            font-weight: 600;
            letter-spacing: 0.5px;
        }
        .artefak-placeholder {
            font-size: 48px;
            color: rgba(73, 3, 252, 0.2);
        }
        .artefak-preview-info {
            padding: 10px;
        }
        .artefak-preview-title {
            font-size: 14px;
            font-weight: 600;
            color: #fff;
            margin-bottom: 3px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .artefak-preview-date {
            font-size: 10px;
            color: rgba(73, 3, 252, 0.4);
        }
        /* CTA Unggah Proses di kiri bawah */
        .upload-process-cta {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background: rgba(73, 3, 252, 0.9);
            border: none;
            color: white;
            font-size: 11px;
            padding: 6px 10px;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 4px;
            z-index: 10;
            transition: all 0.2s;
            font-weight: 600;
            letter-spacing: 0.5px;
        }
        .upload-process-cta:hover {
            background: rgba(73, 3, 252, 1);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(73, 3, 252, 0.3);
        }
        /* Rant Box */
        .rant-box-container {
            margin: 20px 0;
        }
        .rant-box-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        .rant-box-title {
            font-size: 14px;
            font-weight: 600;
            color: #4903fc;
        }
        .rant-box-counter {
            font-size: 11px;
            color: rgba(73, 3, 252, 0.5);
            display: block;
        }
        .rant-box {
            width: 100%;
            min-height: 100px;
            background: rgba(73, 3, 252, 0.03);
            border: 1px solid rgba(73, 3, 252, 0.1);
            border-radius: 8px;
            padding: 12px;
            color: white;
            font-family: inherit;
            font-size: 13px;
            line-height: 1.4;
            resize: none;
            margin-bottom: 8px;
        }
        .rant-box:focus {
            outline: none;
            border-color: #4903fc;
            background: rgba(73, 3, 252, 0.05);
        }
        .rant-box::placeholder {
            color: rgba(73, 3, 252, 0.3);
        }
        .rant-box-footer {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            margin-top: 10px;
        }
        .rant-box-footer .gaskeun-btn {
            background: transparent;
            border: none;
            color: #4903fc;
            font-family: inherit;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            padding: 8px 16px;
            border-radius: 6px;
            transition: all 0.2s;
            text-decoration: none;
        }
        .rant-box-footer .gaskeun-btn:hover {
            background: rgba(73, 3, 252, 0.1);
        }
        /* Recent Rants Section */
        .recent-rants {
            margin: 20px 0;
        }
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .section-title {
            font-size: 14px;
            font-weight: 600;
            color: #4903fc;
        }
        .section-view-all {
            font-size: 11px;
            color: rgba(73, 3, 252, 0.5);
            cursor: pointer;
            transition: color 0.2s;
        }
        .section-view-all:hover {
            color: #4903fc;
        }
        .recent-rants-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .recent-rant-item {
            background: rgba(73, 3, 252, 0.03);
            border: 1px solid rgba(73, 3, 252, 0.08);
            border-radius: 6px;
            padding: 10px;
            transition: all 0.2s;
            cursor: pointer;
        }
        .recent-rant-item:hover {
            background: rgba(73, 3, 252, 0.05);
            transform: translateY(-2px);
        }
        .recent-rant-date {
            font-size: 10px;
            color: rgba(73, 3, 252, 0.4);
            margin-bottom: 3px;
        }
        .recent-rant-content {
            font-size: 12px;
            color: rgba(73, 3, 252, 0.8);
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        /* ===== JALAN PAGE ===== */
        .jalan-header {
            text-align: center;
            margin: 15px 0 15px 0;
        }
        .jalan-title {
            font-size: 18px;
            font-weight: 600;
            color: #4903fc;
            margin-bottom: 8px;
        }
        .jalan-tab-nav {
            display: flex;
            justify-content: space-around;
            margin: 10px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            padding-bottom: 6px;
        }
        .jalan-tab-btn {
            background: none;
            border: none;
            color: rgba(255,255,255,0.6);
            font-size: 12px;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
        }
        .jalan-tab-btn.active {
            color: #4903fc;
            background: rgba(73, 3, 252, 0.1);
        }
        .jalan-tab-content {
            margin-top: 10px;
        }
        /* ARTEFAK DI FEED - VISUAL PENUH */
        .artefak-feed-item {
            background: rgba(73, 3, 252, 0.03);
            border: 1px solid rgba(73, 3, 252, 0.08);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
            transition: all 0.3s;
            cursor: pointer;
        }
        .artefak-feed-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(73, 3, 252, 0.15);
        }
        .artefak-feed-image {
            width: 100%;
            height: 200px;
            overflow: hidden;
            position: relative;
        }
        .artefak-feed-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
        }
        .artefak-feed-info {
            padding: 10px;
        }
        .artefak-feed-username {
            font-size: 10px;
            color: rgba(73, 3, 252, 0.7);
            margin-bottom: 4px;
        }
        .artefak-feed-title {
            font-size: 13px;
            font-weight: 600;
            color: white;
            margin-bottom: 6px;
            line-height: 1.3;
        }
        .artefak-feed-date {
            font-size: 9px;
            color: rgba(255, 255, 255, 0.4);
        }
        /* COMPACT RANT LIST */
        .recent-rants-list.compact {
            gap: 10px !important;
            margin-top: 10px;
        }
        .recent-rant-item.compact {
            padding: 10px !important;
            border-radius: 8px !important;
        }
        .recent-rant-date.compact {
            font-size: 9px;
            color: rgba(255, 255, 255, 0.4);
            margin-bottom: 3px;
        }
        .recent-rant-content.compact {
            font-size: 12px;
            line-height: 1.4;
            margin-bottom: 5px;
        }
        .rant-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 10px;
            color: rgba(255, 255, 255, 0.6);
        }
        .rant-emoji-bar {
            display: flex;
            gap: 5px;
        }
        .emoji-btn {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.7);
            font-size: 13px;
            cursor: pointer;
            padding: 2px;
            border-radius: 4px;
        }
        .emoji-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        .emoji-btn.active {
            color: #4903fc;
        }
        /* ===== DUNIA PAGE ===== */
        .dunia-header {
            text-align: center;
            margin: 15px 0 25px 0;
        }
        .dunia-title {
            font-size: 18px;
            font-weight: 600;
            color: #4903fc;
            margin-bottom: 8px;
        }
        .dunia-subtitle {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.6);
        }
        .profile-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        .profile-username {
            font-size: 20px;
            font-weight: 700;
            color: #4903fc;
            margin-bottom: 8px;
        }
        .profile-meta {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.5);
            margin: 5px 0;
        }
        /* ===== POST MODAL ===== */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 15px;
        }
        .modal-overlay.active {
            display: flex;
        }
        .modal {
            background: rgba(0, 0, 0, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            width: 100%;
            max-width: 450px;
            max-height: 90vh;
            overflow-y: auto;
        }
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .modal-title {
            font-size: 18px;
            font-weight: 600;
            color: #4903fc;
        }
        .modal-close {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.5);
            font-size: 22px;
            cursor: pointer;
            padding: 0;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .modal-close:hover {
            color: white;
        }
        /* ===== BOTTOM NAV ===== */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.98);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: none;
            justify-content: space-around;
            padding: 10px 5px;
            z-index: 1000;
            max-width: 500px;
            margin: 0 auto;
        }
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: rgba(255, 255, 255, 0.5);
            text-decoration: none;
            font-size: 10px;
            padding: 6px 8px;
            transition: all 0.2s;
            min-width: 60px;
            cursor: pointer;
        }
        .nav-item.active {
            color: #4903fc;
        }
        .nav-icon {
            font-size: 16px;
            margin-bottom: 2px;
        }
        .nav-label {
            font-weight: 500;
            letter-spacing: 0.5px;
        }
        /* ===== ANIMATION ===== */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        .fade-in {
            animation: fadeIn 0.3s ease;
        }
        .pulse {
            animation: pulse 1.5s infinite;
        }
        /* ===== EMOJI BAR BELOW ARTEFAK ===== */
        .artefak-emoji-bar {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 8px 15px;
            margin-top: 6px;
            border-top: 1px solid rgba(73, 3, 252, 0.1);
        }
        .artefak-emoji-buttons {
            display: flex;
            gap: 15px;
        }
        .artefak-emoji-btn {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.7);
            font-size: 20px;
            cursor: pointer;
            padding: 4px 8px;
            border-radius: 6px;
            transition: all 0.2s;
            position: relative;
        }
        .artefak-emoji-btn:hover {
            color: #4903fc;
            transform: scale(1.1);
        }
        .artefak-emoji-btn.active {
            color: #4903fc;
        }
        .artefak-emoji-btn.has-new {
            animation: pulse 1.5s infinite;
            color: #ff9999;
        }
        .reaction-peek {
            position: relative;
            cursor: pointer;
        }
        .reaction-peek-popup {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.95);
            border: 1px solid rgba(73, 3, 252, 0.3);
            border-radius: 8px;
            padding: 10px;
            min-width: 150px;
            z-index: 100;
            display: none;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
        }
        .reaction-peek-popup.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        .reaction-peek-title {
            font-size: 10px;
            color: rgba(73, 3, 252, 0.7);
            margin-bottom: 6px;
            text-align: center;
            font-weight: 600;
        }
        .reaction-user-list {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }
        .reaction-user-item {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.8);
            padding: 3px 6px;
            border-radius: 4px;
            background: rgba(73, 3, 252, 0.1);
        }
        /* ===== ARTEFAK GRID 3 KOLOM ===== */
        .artefaks-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 20px 0;
        }
        .artefak-grid-item {
            background: rgba(73, 3, 252, 0.03);
            border: 1px solid rgba(73, 3, 252, 0.08);
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s;
            aspect-ratio: 1;
            position: relative;
        }
        .artefak-grid-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(73, 3, 252, 0.15);
        }
        .artefak-grid-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }
        .artefak-grid-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.7);
            padding: 8px;
            transform: translateY(100%);
            transition: transform 0.3s;
        }
        .artefak-grid-item:hover .artefak-grid-overlay {
            transform: translateY(0);
        }
        .artefak-grid-title {
            font-size: 11px;
            font-weight: 600;
            color: white;
            margin-bottom: 2px;
        }
        .artefak-grid-date {
            font-size: 9px;
            color: rgba(255, 255, 255, 0.6);
        }
        /* ===== FILE UPLOAD ===== */
        .file-input-wrapper {
            position: relative;
            overflow: hidden;
            display: inline-block;
        }
        .file-input-wrapper input[type=file] {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }
        /* Modal Unggah Artefak */
        .upload-modal-content {
            max-width: 100%;
        }
        .upload-preview {
            width: 100%;
            height: 250px;
            background: rgba(73, 3, 252, 0.05);
            border: 2px dashed rgba(73, 3, 252, 0.3);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 15px 0;
            overflow: hidden;
        }
        .upload-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
        }
        .upload-placeholder {
            font-size: 48px;
            color: rgba(73, 3, 252, 0.2);
        }
        .upload-title-input {
            width: 100%;
            background: rgba(73, 3, 252, 0.05);
            border: 1px solid rgba(73, 3, 252, 0.2);
            border-radius: 8px;
            padding: 12px;
            color: white;
            font-family: inherit;
            font-size: 14px;
            margin: 10px 0;
            outline: none;
        }
        .upload-title-input:focus {
            border-color: #4903fc;
        }
        .upload-title-input::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }
        .word-counter {
            text-align: right;
            font-size: 11px;
            color: rgba(255, 255, 255, 0.4);
            margin-bottom: 15px;
        }
        .warning-notice {
            background: rgba(255, 50, 50, 0.1);
            border: 1px solid rgba(255, 50, 50, 0.3);
            border-radius: 8px;
            padding: 12px;
            margin: 15px 0;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
            text-align: center;
            line-height: 1.4;
        }
        .warning-notice strong {
            color: #ff9999;
        }
    </style>
</head>
<body>
    <!-- POST MODAL -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal" id="modalContent">
            <!-- Modal content will be injected here -->
        </div>
    </div>

    <!-- BOTTOM NAVIGATION -->
    <div class="bottom-nav" id="bottomNav">
        <a href="#" class="nav-item active" onclick="showTab('jejak')">
            <div class="nav-icon">üìù</div>
            <div class="nav-label">Jejak</div>
        </a>
        <a href="#" class="nav-item" onclick="showTab('jalan')">
            <div class="nav-icon">üö∂</div>
            <div class="nav-label">Jalan</div>
        </a>
        <a href="#" class="nav-item" onclick="showTab('dunia')">
            <div class="nav-icon">üåç</div>
            <div class="nav-label">Dunia</div>
        </a>
    </div>

    <!-- LOGIN PAGE -->
    <div id="login" class="page active">
        <div class="login-container">
            <div class="soul-tagline fade-in">
                Ga perlu followers,<br>
                cuma butuh <span class="highlight">sefrekuensi...</span>
            </div>
            <div class="logo">NOPE</div>
            <input type="text" class="nope-input" id="usernameInput" placeholder="nama_kamu" maxlength="20">
            <div class="user-status" id="userStatus" style="display:none;margin:10px 0;color:rgba(73,3,252,0.7);font-size:12px;"></div>
            <button class="enter-btn" onclick="processLogin()">Gaskeun!</button>
        </div>
        <div class="legal-hint">Anonim, jangan gunakan nama aslimu</div>
    </div>

    <!-- JEJAK PAGE -->
    <div id="jejak" class="page" style="padding-top: 80px;">
        <div class="logo">NOPE</div>
        <div class="artefak-preview-container" id="artefakPreviewContainer"></div>
        <div class="rant-box-container">
            <div class="rant-box-header">
                <div class="rant-box-title">Rant Box</div>
                <div class="rant-box-counter" id="rantCounter">0/300</div>
            </div>
            <textarea 
                class="rant-box" 
                id="rantBox" 
                placeholder="Perasaanmu dalam 300 huruf" 
                maxlength="300" 
                rows="5"
            ></textarea>
            <div class="rant-box-footer">
                <button class="gaskeun-btn" onclick="postRantFromBox()">
                    Gaskeun!
                </button>
            </div>
        </div>
        <div class="recent-rants">
            <div class="section-header">
                <div class="section-title">Jejakmu</div>
                <div class="section-view-all" onclick="viewAllRants()">Lihat semua</div>
            </div>
            <div class="recent-rants-list" id="recentRantsList"></div>
        </div>
        <div class="artefaks-grid" id="artefaksGrid"></div>
    </div>

    <!-- JALAN PAGE -->
    <div id="jalan" class="page">
        <div class="logo">NOPE</div>
        <div class="jalan-header">
            <div class="jalan-title">Jalan mu</div>
        </div>
        <div class="jalan-tab-nav">
            <button class="jalan-tab-btn active" onclick="showJalanTab('frekuensi')">Frekuensi</button>
            <button class="jalan-tab-btn" onclick="showJalanTab('gelombang')">Gelombang</button>
            <button class="jalan-tab-btn" onclick="showJalanTab('movement')">Movement</button>
        </div>
        <div id="jalan-frekuensi" class="jalan-tab-content"></div>
        <div id="jalan-gelombang" class="jalan-tab-content" style="display:none;"></div>
        <div id="jalan-movement" class="jalan-tab-content" style="display:none;"></div>
        <div class="zona-card" style="margin-top: 15px;background:rgba(73,3,252,0.03);border:1px solid rgba(73,3,252,0.1);border-radius:10px;padding:15px;">
            <div class="zona-card-header" style="padding-bottom:6px;margin-bottom:8px;border-bottom:1px solid rgba(73,3,252,0.1);">
                <div class="zona-card-name" style="font-size:14px;color:#4903fc;">Frekuensi mu</div>
            </div>
            <div id="selectedHashtagsList" style="display:flex;gap:6px;flex-wrap:wrap;"></div>
        </div>
    </div>

    <!-- DUNIA PAGE -->
    <div id="dunia" class="page">
        <div class="logo">NOPE</div>
        <div class="dunia-header">
            <div class="dunia-title">Dunia mu</div>
            <div class="dunia-subtitle">Profil dan pengaturan</div>
        </div>
        <div class="profile-card">
            <div class="profile-username" id="profileUsername">@username</div>
            <div class="profile-meta" id="profileJoinDate">Bergabung: -</div>
            <div class="profile-meta" id="profileActivity">Aktivitas: 0 posting</div>
        </div>
        <div class="action-btn" onclick="openArtefakUpload()" style="margin-top: 8px;">
            üìÅ Unggah Artefak
        </div>
        <div class="action-btn secondary" onclick="exportData()" style="margin-top: 8px;">
            üì§ Export Data
        </div>
        <div class="action-btn secondary" onclick="showHashtagsModal()" style="margin-top: 8px;">
            üëÅÔ∏è Lihat # terpilih
        </div>
        <div class="action-btn secondary" onclick="logout()" style="background: rgba(255,50,50,0.1); border-color: rgba(255,50,50,0.3); margin-top: 15px;">
            üö™ Keluar
        </div>
    </div>

    <input type="file" id="artefakFileInput" accept="image/*" style="display: none;">

    <script>
        // ===== STATE =====
        let currentUser = null;
        let currentTab = 'jejak';
        let currentArtefakReactions = {
            nangis: { count: 0, users: [], hasNew: false },
            api: { count: 0, users: [], hasNew: false },
            badut: { count: 0, users: [], hasNew: false }
        };

        // ===== 20 KATA KUNCI PER ZONA =====
        const zonaKeywords = {
            popculture: [
                "ending gaje", "film jelek", "konser", "tiket mahal", "influencer palsu", 
                "konten fake", "viral banget", "trending", "sound tiktok", "drakor", 
                "k-pop", "stan", "bucin", "healing nonton", "playlist galau", 
                "ending nggak masuk akal", "baper sama karakter", "beli merch", "ngikutin seleb", "ngefans sama artis"
            ],
            personalpain: [
                "senyum di luar", "nangis di kamar", "capek jadi tempat curhat", "pura-pura baik", 
                "nggak ada yang ngerti", "overthinking", "burnout", "anxiety", "nggak punya teman", 
                "ditinggal pergi", "ghosting", "read doang", "diam-diam nangis", "lelah jadi kuat", 
                "ngerasa sendirian", "nggak berharga", "gabut tapi nggak happy", "mau sendiri aja", 
                "capek jadi orang baik", "butuh ruang"
            ],
            socialsickness: [
                "magang gratis", "dibayar sertifikat", "kerja tanpa gaji", "bos toxic", "gaji nggak cukup", 
                "kontrakan mahal", "temen palsu", "gosip belakang", "curhat bocor", "toxic group", 
                "wagroup ngerepotin", "orang munafik", "gaya hidup pamer", "FOMO", "ngirit terus", 
                "gajian sejam abis", "kerja keras tapi nggak dihargai", "dijadikan beban", 
                "relasi satu arah", "harus selalu tersedia"
            ]
        };

        // ===== HASHTAG MAPPING =====
        const hashtagToZona = {
            "#FilmEndingGaje": "popculture",
            "#InfluencerNgehek": "popculture",
            "#BeliTiketJualGinjal": "popculture",
            "#HealingPayLater": "popculture",
            "#SayNOPE": "personalpain",
            "#DiGhostingGebetan": "personalpain",
            "#CapekPuraPura": "personalpain",
            "#DiamDiamNangis": "personalpain",
            "#MagangDibayarSerifikat": "socialsickness",
            "#KeluarWAGroup": "socialsickness",
            "#TemenLambeTurah": "socialsickness",
            "#GajianSejamAbis": "socialsickness"
        };

        // ===== STORAGE =====
        const save = (key, data) => localStorage.setItem('nope_' + key, JSON.stringify(data));
        const load = (key) => localStorage.getItem('nope_' + key) ? JSON.parse(localStorage.getItem('nope_' + key)) : null;

        // ===== DUMMY DATA =====
        function initDummyData() {
            if (load('users')) return;
            const now = Date.now();
            const dummy = {
                "diamdiamaja": {
                    username: "diamdiamaja",
                    created: now - 86400000 * 10,
                    lastLogin: now,
                    selectedHashtags: { popculture: "#FilmEndingGaje", personalpain: "#CapekPuraPura", socialsickness: "#GajianSejamAbis" },
                    onboarded: true,
                    rants: [{ content: "senyum di WA, nangis di kamar mandi.", date: now - 86400000 * 5, hashtag: "#CapekPuraPura" }],
                    artefacts: [{ title: "kopi dingin", date: now - 86400000 * 3, imageUrl: "https://images.unsplash.com/photo-1563089145-599997674d42?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" }]
                }
            };
            save('users', dummy);
            save('global_rants', [{ username: "diamdiamaja", content: "senyum di WA, nangis di kamar mandi.", date: now - 86400000 * 5, hashtag: "#CapekPuraPura" }]);
            save('global_artefaks', [{ username: "diamdiamaja", title: "kopi dingin", date: now - 86400000 * 3, imageUrl: "https://images.unsplash.com/photo-1563089145-599997674d42?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80", nobar: true }]);
        }

        // ===== INFERENCE LOGIC =====
        function inferHashtagsFromRants(rants) {
            const text = rants.map(r => r.content.toLowerCase()).join(" ");
            const score = { popculture: 0, personalpain: 0, socialsickness: 0 };
            
            for (const [zona, keywords] of Object.entries(zonaKeywords)) {
                for (const kw of keywords) {
                    if (text.includes(kw)) score[zona]++;
                }
            }

            const result = {};
            const zones = ["popculture", "personalpain", "socialsickness"];
            for (const zona of zones) {
                const candidates = Object.keys(hashtagToZona).filter(h => hashtagToZona[h] === zona);
                result[zona] = candidates.length > 0 ? candidates[0] : null; // fallback ke opsi pertama
            }
            return result;
        }

        // ===== LOGIN =====
        function processLogin() {
            let u = document.getElementById('usernameInput').value.trim().toLowerCase();
            if (u.length < 3) { alert('Minimal 3 karakter'); return; }
            u = u.replace(/[^a-z0-9_]/g, '').substring(0, 20);
            currentUser = u;
            localStorage.setItem('nope_current_user', u);
            let users = load('users') || {};
            if (!users[u]) {
                users[u] = { username: u, created: Date.now(), lastLogin: Date.now(), selectedHashtags: null, onboarded: false, rants: [], artefacts: [] };
                save('users', users);
            } else {
                users[u].lastLogin = Date.now();
                save('users', users);
            }
            showPage('jejak'); // ‚úÖ LANGSUNG KE JEJAK
        }

        // ===== POST RANT + INFERENCE =====
        function postRantFromBox() {
            const content = document.getElementById('rantBox').value.trim();
            if (!content) return alert('Tulis rant dulu!');
            const users = load('users') || {};
            const user = users[currentUser];
            if (!user.rants) user.rants = [];
            user.rants.push({ content, date: Date.now(), hashtag: null });
            
            // Jika rant ke-3, lakukan inferensi
            if (user.rants.length === 3 && !user.selectedHashtags) {
                user.selectedHashtags = inferHashtagsFromRants(user.rants);
                user.onboarded = true;
                save('users', users);
                showToast('Frekuensi mu telah diatur secara diam-diam ‚ú®');
            }
            
            user.lastLogin = Date.now();
            save('users', users);
            const global = load('global_rants') || [];
            global.push({ username: currentUser, content, date: Date.now(), hashtag: null });
            save('global_rants', global);
            document.getElementById('rantBox').value = '';
            document.getElementById('rantCounter').textContent = '0/300';
            if (document.getElementById('jejak').classList.contains('active')) initJejakPage();
            if (document.getElementById('jalan').classList.contains('active')) initJalanPage();
            showToast('Rant berhasil diposting!');
        }

        // ===== REST OF UI FUNCTIONS (RENDER, MODAL, ETC) =====
        function initJejakPage() {
            if (!currentUser) return showPage('login');
            setupRantBox();
            renderArtefakPreview();
            renderRecentRants();
            renderArtefakGrid();
            loadArtefakReactions();
        }
        function setupRantBox() {
            const box = document.getElementById('rantBox');
            if (box) {
                box.value = '';
                document.getElementById('rantCounter').textContent = '0/300';
                box.oninput = () => document.getElementById('rantCounter').textContent = `${box.value.length}/300`;
            }
        }
        function renderArtefakPreview() {
            const c = document.getElementById('artefakPreviewContainer');
            const users = load('users') || {};
            const user = users[currentUser];
            if (!user || !user.artefacts || user.artefacts.length === 0) {
                c.innerHTML = `
                    <div class="artefak-preview">
                        <div class="artefak-preview-image">
                            <div style="font-size:48px;color:rgba(73,3,252,0.2)">üñºÔ∏è</div>
                            <div class="artefak-nobar-badge">Nobar terakhir sama mantan</div>
                            <button class="upload-process-cta" onclick="openArtefakUpload()">Unggah proses</button>
                        </div>
                        <div style="padding:12px;"><div>üìÅ Belum ada artefak</div></div>
                        ${renderArtefakEmojiBar()}
                    </div>`;
            } else {
                const latest = user.artefacts[user.artefacts.length - 1];
                const date = new Date(latest.date).toLocaleDateString('id-ID', { day: 'numeric', month: 'long', year: 'numeric' });
                c.innerHTML = `
                    <div class="artefak-preview">
                        <div class="artefak-preview-image">
                            <img src="${latest.imageUrl}" style="width:100%;height:100%;object-fit:cover;">
                            <div class="artefak-nobar-badge">Nobar terakhir sama mantan</div>
                            <button class="upload-process-cta" onclick="openArtefakUpload()">Unggah proses</button>
                        </div>
                        <div style="padding:12px;"><div>üìÅ ${latest.title}</div></div>
                        ${renderArtefakEmojiBar()}
                    </div>`;
            }
        }
        function renderArtefakEmojiBar() {
            return `
                <div class="artefak-emoji-bar">
                    <button class="artefak-emoji-btn" onclick="reactToArtefak('nangis')" title="Nangis">üò≠</button>
                    <button class="artefak-emoji-btn" onclick="reactToArtefak('api')" title="Api">üî•</button>
                    <button class="artefak-emoji-btn" onclick="reactToArtefak('badut')" title="Badut">ü§°</button>
                </div>`;
        }
        function reactToArtefak(type) {
            showToast(`Kamu bereaksi: ${type}!`);
        }
        function renderRecentRants() {
            const c = document.getElementById('recentRantsList');
            const users = load('users') || {};
            const user = users[currentUser];
            if (!user || !user.rants || user.rants.length === 0) {
                c.innerHTML = '<div style="color:rgba(73,3,252,0.5);text-align:center;padding:20px;">Belum ada rant</div>';
                return;
            }
            const rants = user.rants.slice(-3).reverse();
            c.innerHTML = '';
            rants.forEach(r => {
                const div = document.createElement('div');
                div.className = 'recent-rant-item';
                div.innerHTML = `<div style="font-size:10px;color:rgba(73,3,252,0.6);margin-bottom:3px;">${new Date(r.date).toLocaleDateString()}</div><div>${r.content.length > 100 ? r.content.substring(0,100)+'...' : r.content}</div>`;
                c.appendChild(div);
            });
        }
        function renderArtefakGrid() {
            const c = document.getElementById('artefaksGrid');
            const source = [
                { title: "Late Night", imageUrl: "https://images.unsplash.com/photo-1563089145-599997674d42?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&q=80" },
                { title: "Studio", imageUrl: "https://images.unsplash.com/photo-1542744095-fcf48d80b0fd?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&q=80" },
                { title: "Gym", imageUrl: "https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&q=80" },
                { title: "Cafe", imageUrl: "https://images.unsplash.com/photo-1528702748617-c64d49f918af?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&q=80" },
                { title: "Concert", imageUrl: "https://images.unsplash.com/photo-1558618666-fcd25c85cd64?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&q=80" },
                { title: "Skyline", imageUrl: "https://images.unsplash.com/photo-1593115057322-e94b77572f20?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&q=80" }
            ];
            c.innerHTML = '';
            source.forEach(item => {
                const div = document.createElement('div');
                div.className = 'artefak-grid-item';
                div.innerHTML = `<img src="${item.imageUrl}" style="width:100%;height:100%;object-fit:cover;"><div class="artefak-grid-overlay"><div style="font-size:11px;color:white;">${item.title}</div></div>`;
                c.appendChild(div);
            });
        }

        // ===== JALAN & DUNIA (SHORTENED FOR BREVITY) =====
        function initJalanPage() {
            if (!currentUser) return showPage('login');
            const users = load('users') || {};
            const user = users[currentUser];
            renderSelectedHashtags();
            renderFrekuensiFeed();
            renderGelombangFeed();
            renderMovementFeed();
            showJalanTab('frekuensi');
        }
        function renderSelectedHashtags() {
            const c = document.getElementById('selectedHashtagsList');
            const users = load('users') || {};
            const user = users[currentUser];
            c.innerHTML = '';
            if (user?.selectedHashtags) {
                Object.values(user.selectedHashtags).forEach(h => {
                    if (h) {
                        const span = document.createElement('span');
                        span.style.cssText = 'padding:4px 8px;background:rgba(73,3,252,0.1);border-radius:6px;font-size:12px;color:#4903fc;';
                        span.textContent = h;
                        c.appendChild(span);
                    }
                });
            }
        }
        function showJalanTab(tab) {
            ['frekuensi','gelombang','movement'].forEach(t => {
                const el = document.getElementById(`jalan-${t}`);
                if (el) el.style.display = t === tab ? 'block' : 'none';
            });
            document.querySelectorAll('.jalan-tab-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        }
        function renderFrekuensiFeed() {
            const c = document.getElementById('jalan-frekuensi');
            const users = load('users') || {};
            const user = users[currentUser];
            if (!user?.selectedHashtags) {
                c.innerHTML = '<div style="color:rgba(73,3,252,0.5);padding:20px;text-align:center;">Posting 3 rant dulu untuk atur frekuensi</div>';
                return;
            }
            c.innerHTML = '<div style="color:rgba(73,3,252,0.5);padding:20px;text-align:center;">Frekuensi sedang dimuat...</div>';
        }
        function renderGelombangFeed() { document.getElementById('jalan-gelombang').innerHTML = '<div style="padding:20px;text-align:center;">Gelombang global</div>'; }
        function renderMovementFeed() { document.getElementById('jalan-movement').innerHTML = '<div style="padding:20px;text-align:center;">Gerakan solidaritas</div>'; }

        function initDuniaPage() {
            const users = load('users') || {};
            const user = users[currentUser];
            if (user) {
                document.getElementById('profileUsername').textContent = '@' + currentUser;
                document.getElementById('profileJoinDate').textContent = 'Bergabung: ' + new Date(user.created).toLocaleDateString('id-ID');
                document.getElementById('profileActivity').textContent = `Aktivitas: ${user.rants?.length || 0} posting`;
            }
        }

        // ===== UTILS =====
        function showPage(pageId) {
            if (pageId !== 'login' && !currentUser) return showPage('login');
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            document.getElementById('bottomNav').style.display = ['jejak','jalan','dunia'].includes(pageId) ? 'flex' : 'none';
            if (pageId === 'jejak') initJejakPage();
            if (pageId === 'jalan') initJalanPage();
            if (pageId === 'dunia') initDuniaPage();
            updateNavActive(pageId);
        }
        function showTab(tabId) {
            if (!currentUser) return showPage('login');
            showPage(tabId);
        }
        function updateNavActive(activeTab) {
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            const btn = document.querySelector(`.nav-item[onclick*="${activeTab}"]`);
            if (btn) btn.classList.add('active');
        }
        function openArtefakUpload() { alert('Fitur unggah artefak'); }
        function exportData() { alert('Data diekspor'); }
        function showHashtagsModal() { alert('Lihat # terpilih'); }
        function logout() {
            if (confirm('Keluar?')) {
                currentUser = null;
                localStorage.removeItem('nope_current_user');
                showPage('login');
            }
        }
        function showToast(msg) {
            const t = document.createElement('div');
            t.className = 'toast';
            t.style.cssText = 'position:fixed;top:20px;left:50%;transform:translateX(-50%);background:rgba(73,3,252,0.9);color:white;padding:12px 20px;border-radius:8px;font-size:14px;font-weight:500;z-index:10000;animation:fadeIn 0.3s ease;';
            t.textContent = msg;
            document.body.appendChild(t);
            setTimeout(() => document.body.removeChild(t), 3000);
        }

        // ===== INIT =====
        function initializeApp() {
            initDummyData();
            const saved = localStorage.getItem('nope_current_user');
            if (saved) {
                currentUser = saved;
                showPage('jejak');
            } else {
                showPage('login');
            }
        }
        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
</body>
</html>
