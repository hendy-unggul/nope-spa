<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NOPE</title>
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#000000">
    <style>
        /* ===== RESET & BASE ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            background: #000;
            color: #fff;
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            min-height: 100vh;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }
        /* ===== PAGES ===== */
        .page {
            display: none;
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
        }
        .page.active {
            display: block;
        }
        /* ===== LOGO NOPE ===== */
        .logo {
            font-size: 35px; /* Diperkecil 50% dari 70px */
            font-weight: 900;
            color: #ff9999;
            margin: 0;
            line-height: 1;
            letter-spacing: -3px;
            position: absolute;
            top: 20px;
            left: 20px;
        }
        /* ===== INPUT STYLE ===== */
        .nope-input {
            width: 100%;
            background: transparent;
            border: none;
            border-bottom: 1px solid rgba(73, 3, 252, 0.2); /* Ganti warna ungu jadi biru #4903fc */
            color: white;
            font-size: 22px;
            text-align: center;
            padding: 12px 0;
            outline: none;
            font-weight: 300;
            margin: 30px 0 20px 0;
        }
        .nope-input:focus {
            border-bottom-color: #4903fc; /* Ganti warna ungu jadi biru #4903fc */
        }
        /* ===== HINT TEXT ===== */
        .hint {
            text-align: center;
            color: rgba(73, 3, 252, 0.4); /* Ganti warna ungu jadi biru #4903fc */
            font-size: 13px;
            margin: 8px 0;
            line-height: 1.4;
        }
        .hint strong {
            color: rgba(73, 3, 252, 0.7); /* Ganti warna ungu jadi biru #4903fc */
        }
        /* ===== USER STATUS ===== */
        .user-status {
            text-align: center;
            margin: 15px 0;
            padding: 12px;
            font-size: 14px;
            line-height: 1.4;
            background: rgba(73, 3, 252, 0.05); /* Ganti warna ungu jadi biru #4903fc */
            color: rgba(73, 3, 252, 0.7); /* Ganti warna ungu jadi biru #4903fc */
            display: none;
            border-radius: 6px;
        }
        .user-status.show {
            display: block;
        }
        /* ===== ZONA SELECTION HEADER ===== */
        .zona-header {
            text-align: center;
            margin: 20px 0 30px 0;
        }
        .zona-title {
            font-size: 18px;
            font-weight: 600;
            color: #4903fc; /* Ganti warna ungu jadi biru #4903fc */
            margin-bottom: 5px;
        }
        .zona-subtitle {
            font-size: 13px;
            color: rgba(73, 3, 252, 0.5); /* Ganti warna ungu jadi biru #4903fc */
        }
        /* ===== ZONA CARD ===== */
        .zona-card {
            background: rgba(73, 3, 252, 0.03); /* Ganti warna ungu jadi biru #4903fc */
            border: 1px solid rgba(73, 3, 252, 0.1); /* Ganti warna ungu jadi biru #4903fc */
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .zona-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(73, 3, 252, 0.1); /* Ganti warna ungu jadi biru #4903fc */
        }
        .zona-card-name {
            font-size: 18px;
            font-weight: 600;
            color: #4903fc; /* Ganti warna ungu jadi biru #4903fc */
        }
        .zona-card-desc {
            font-size: 12px;
            color: rgba(73, 3, 252, 0.5); /* Ganti warna ungu jadi biru #4903fc */
        }
        .zona-card-counter {
            font-size: 14px;
            color: #4903fc; /* Ganti warna ungu jadi biru #4903fc */
            font-weight: 600;
        }
        /* ===== HASHTAG SELECTION ===== */
        .hashtag-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .hashtag-item {
            padding: 12px;
            background: rgba(73, 3, 252, 0.05); /* Ganti warna ungu jadi biru #4903fc */
            border: 1px solid rgba(73, 3, 252, 0.08); /* Ganti warna ungu jadi biru #4903fc */
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .hashtag-item:hover {
            background: rgba(73, 3, 252, 0.08); /* Ganti warna ungu jadi biru #4903fc */
        }
        .hashtag-item.selected {
            background: rgba(73, 3, 252, 0.15); /* Ganti warna ungu jadi biru #4903fc */
            border-color: #4903fc; /* Ganti warna ungu jadi biru #4903fc */
            box-shadow: 0 2px 8px rgba(73, 3, 252, 0.1); /* Ganti warna ungu jadi biru #4903fc */
        }
        .hashtag-name {
            font-size: 15px;
            font-weight: 500;
            color: rgba(73, 3, 252, 0.9); /* Ganti warna ungu jadi biru #4903fc */
            margin-bottom: 4px;
        }
        .hashtag-microcopy {
            font-size: 11px;
            color: rgba(73, 3, 252, 0.5); /* Ganti warna ungu jadi biru #4903fc */
            line-height: 1.3;
            font-style: italic;
        }
        /* ===== ACTION BUTTONS ===== */
        .action-btn {
            width: 100%;
            padding: 16px;
            margin: 10px 0;
            background: rgba(73, 3, 252, 0.15); /* Ganti warna ungu jadi biru #4903fc */
            border: 1px solid #4903fc; /* Ganti warna ungu jadi biru #4903fc */
            color: white;
            font-family: inherit;
            font-size: 17px;
            font-weight: 600;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
        }
        .action-btn:hover:not(:disabled) {
            background: rgba(73, 3, 252, 0.25); /* Ganti warna ungu jadi biru #4903fc */
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(73, 3, 252, 0.2); /* Ganti warna ungu jadi biru #4903fc */
        }
        .action-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }
        .action-btn.secondary {
            background: rgba(73, 3, 252, 0.05); /* Ganti warna ungu jadi biru #4903fc */
            border-color: rgba(73, 3, 252, 0.1); /* Ganti warna ungu jadi biru #4903fc */
        }
        .action-btn.secondary:hover {
            background: rgba(73, 3, 252, 0.1); /* Ganti warna ungu jadi biru #4903fc */
        }
        /* ===== JEJAK PAGE - NEW STYLES ===== */
        /* Artefak Preview - Full Width Image */
        .artefak-preview-container {
            margin: 20px 0;
        }
        .artefak-preview {
            width: 100%;
            position: relative;
            background: rgba(73, 3, 252, 0.03); /* Ganti warna ungu jadi biru #4903fc */
            border: 1px solid rgba(73, 3, 252, 0.1); /* Ganti warna ungu jadi biru #4903fc */
            border-radius: 12px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s;
        }
        .artefak-preview:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 20px rgba(73, 3, 252, 0.15); /* Ganti warna ungu jadi biru #4903fc */
        }
        .artefak-preview-image {
            width: 100%;
            height: 0;
            padding-bottom: 80%;
            background: linear-gradient(135deg, rgba(73, 3, 252, 0.1), rgba(73, 3, 252, 0.1)); /* Ganti warna ungu jadi biru #4903fc */
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        .artefak-placeholder {
            font-size: 48px;
            color: rgba(73, 3, 252, 0.2); /* Ganti warna ungu jadi biru #4903fc */
        }
        .artefak-preview-info {
            padding: 15px;
        }
        .artefak-preview-title {
            font-size: 16px;
            font-weight: 600;
            color: #fff;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .artefak-preview-date {
            font-size: 11px;
            color: rgba(73, 3, 252, 0.4); /* Ganti warna ungu jadi biru #4903fc */
        }
        /* Rant Box */
        .rant-box-container {
            margin: 25px 0;
        }
        .rant-box-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .rant-box-title {
            font-size: 16px;
            font-weight: 600;
            color: #4903fc; /* Ganti warna ungu jadi biru #4903fc */
        }
        .rant-box-counter {
            font-size: 12px;
            color: rgba(73, 3, 252, 0.5); /* Ganti warna ungu jadi biru #4903fc */
        }
        .rant-box {
            width: 100%;
            min-height: 120px;
            background: rgba(73, 3, 252, 0.03); /* Ganti warna ungu jadi biru #4903fc */
            border: 1px solid rgba(73, 3, 252, 0.1); /* Ganti warna ungu jadi biru #4903fc */
            border-radius: 10px;
            padding: 15px;
            color: white;
            font-family: inherit;
            font-size: 14px;
            line-height: 1.4;
            resize: none;
            margin-bottom: 10px;
        }
        .rant-box:focus {
            outline: none;
            border-color: #4903fc; /* Ganti warna ungu jadi biru #4903fc */
            background: rgba(73, 3, 252, 0.05); /* Ganti warna ungu jadi biru #4903fc */
        }
        .rant-box::placeholder {
            color: rgba(73, 3, 252, 0.3); /* Ganti warna ungu jadi biru #4903fc */
        }
        .rant-box-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .rant-hashtag-select {
            background: rgba(73, 3, 252, 0.05); /* Ganti warna ungu jadi biru #4903fc */
            border: 1px solid rgba(73, 3, 252, 0.1); /* Ganti warna ungu jadi biru #4903fc */
            border-radius: 6px;
            padding: 8px 12px;
            color: white;
            font-family: inherit;
            font-size: 12px;
            outline: none;
            cursor: pointer;
        }
        .rant-hashtag-select:focus {
            border-color: #4903fc; /* Ganti warna ungu jadi biru #4903fc */
        }
        /* Recent Rants Section */
        .recent-rants {
            margin: 30px 0;
        }
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .section-title {
            font-size: 16px;
            font-weight: 600;
            color: #4903fc; /* Ganti warna ungu jadi biru #4903fc */
        }
        .section-view-all {
            font-size: 12px;
            color: rgba(73, 3, 252, 0.5); /* Ganti warna ungu jadi biru #4903fc */
            cursor: pointer;
            transition: color 0.2s;
        }
        .section-view-all:hover {
            color: #4903fc; /* Ganti warna ungu jadi biru #4903fc */
        }
        .recent-rants-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .recent-rant-item {
            background: rgba(73, 3, 252, 0.03); /* Ganti warna ungu jadi biru #4903fc */
            border: 1px solid rgba(73, 3, 252, 0.08); /* Ganti warna ungu jadi biru #4903fc */
            border-radius: 8px;
            padding: 12px;
            transition: all 0.2s;
        }
        .recent-rant-item:hover {
            background: rgba(73, 3, 252, 0.05); /* Ganti warna ungu jadi biru #4903fc */
            transform: translateY(-2px);
        }
        .recent-rant-date {
            font-size: 11px;
            color: rgba(73, 3, 252, 0.4); /* Ganti warna ungu jadi biru #4903fc */
            margin-bottom: 5px;
        }
        .recent-rant-content {
            font-size: 13px;
            color: rgba(73, 3, 252, 0.8); /* Ganti warna ungu jadi biru #4903fc */
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        /* Recent Artefaks Grid */
        .recent-artefaks {
            margin: 30px 0 100px 0;
        }
        .artefaks-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }
        .artefak-grid-item {
            background: rgba(73, 3, 252, 0.03); /* Ganti warna ungu jadi biru #4903fc */
            border: 1px solid rgba(73, 3, 252, 0.08); /* Ganti warna ungu jadi biru #4903fc */
            border-radius: 8px;
            padding: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .artefak-grid-item:hover {
            background: rgba(73, 3, 252, 0.05); /* Ganti warna ungu jadi biru #4903fc */
            transform: translateY(-2px);
        }
        .artefak-grid-image {
            width: 100%;
            height: 0;
            padding-bottom: 60%;
            background: linear-gradient(135deg, rgba(73, 3, 252, 0.1), rgba(73, 3, 252, 0.1)); /* Ganti warna ungu jadi biru #4903fc */
            border-radius: 6px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .artefak-grid-icon {
            font-size: 24px;
            color: rgba(73, 3, 252, 0.2); /* Ganti warna ungu jadi biru #4903fc */
        }
        .artefak-grid-title {
            font-size: 12px;
            font-weight: 500;
            color: rgba(73, 3, 252, 0.9); /* Ganti warna ungu jadi biru #4903fc */
            display: -webkit-box;
            -webkit-line-clamp: 1;
            -webkit-box-orient: vertical;
            overflow: hidden;
            margin-bottom: 4px;
        }
        .artefak-grid-date {
            font-size: 10px;
            color: rgba(73, 3, 252, 0.4); /* Ganti warna ungu jadi biru #4903fc */
        }
        /* ===== JALAN PAGE ===== */
        .jalan-header {
            text-align: center;
            margin: 20px 0 20px 0;
        }
        .jalan-title {
            font-size: 20px;
            font-weight: 600;
            color: #4903fc; /* Ganti warna ungu jadi biru #4903fc */
            margin-bottom: 10px;
        }
        .jalan-tab-nav {
            display: flex;
            justify-content: space-around;
            margin: 15px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            padding-bottom: 8px;
        }
        .jalan-tab-btn {
            background: none;
            border: none;
            color: rgba(255,255,255,0.6);
            font-size: 13px;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
        }
        .jalan-tab-btn.active {
            color: #4903fc; /* Ganti warna ungu jadi biru #4903fc */
            background: rgba(73, 3, 252, 0.1); /* Ganti warna ungu jadi biru #4903fc */
        }
        .jalan-tab-content {
            margin-top: 15px;
        }
        /* COMPACT RANT LIST */
        .recent-rants-list.compact {
            gap: 10px !important;
            margin-top: 12px;
        }
        .recent-rant-item.compact {
            padding: 10px !important;
            border-radius: 8px !important;
        }
        .recent-rant-date.compact {
            font-size: 10px;
            color: rgba(255, 255, 255, 0.4);
            margin-bottom: 4px;
        }
        .recent-rant-content.compact {
            font-size: 13px;
            line-height: 1.4;
            margin-bottom: 6px;
        }
        .rant-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 11px;
            color: rgba(255, 255, 255, 0.6);
        }
        .rant-emoji-bar {
            display: flex;
            gap: 6px;
        }
        .emoji-btn {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.7);
            font-size: 14px;
            cursor: pointer;
            padding: 2px;
            border-radius: 4px;
        }
        .emoji-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        .emoji-btn.active {
            color: #4903fc; /* Ganti warna ungu jadi biru #4903fc */
        }
        .comment-link {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
            padding-bottom: 1px;
        }
        .comment-link:hover {
            color: #4903fc; /* Ganti warna ungu jadi biru #4903fc */
            border-bottom-color: #4903fc; /* Ganti warna ungu jadi biru #4903fc */
        }
        /* ===== DUNIA PAGE ===== */
        .dunia-header {
            text-align: center;
            margin: 20px 0 30px 0;
        }
        .dunia-title {
            font-size: 20px;
            font-weight: 600;
            color: #4903fc; /* Ganti warna ungu jadi biru #4903fc */
            margin-bottom: 10px;
        }
        .dunia-subtitle {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.6);
        }
        .profile-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 25px;
            margin: 30px 0;
            text-align: center;
        }
        .profile-username {
            font-size: 24px;
            font-weight: 700;
            color: #4903fc; /* Ganti warna ungu jadi biru #4903fc */
            margin-bottom: 10px;
        }
        .profile-meta {
            font-size: 13px;
            color: rgba(255, 255, 255, 0.5);
            margin: 5px 0;
        }
        /* ===== POST MODAL ===== */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
        }
        .modal-overlay.active {
            display: flex;
        }
        .modal {
            background: rgba(0, 0, 0, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 25px;
            width: 100%;
            max-width: 450px;
            max-height: 90vh;
            overflow-y: auto;
        }
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .modal-title {
            font-size: 20px;
            font-weight: 600;
            color: #4903fc; /* Ganti warna ungu jadi biru #4903fc */
        }
        .modal-close {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.5);
            font-size: 24px;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .modal-close:hover {
            color: white;
        }
        /* ===== BOTTOM NAV ===== */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.98);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            z-index: 1000;
        }
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: rgba(255, 255, 255, 0.5);
            text-decoration: none;
            font-size: 11px;
            padding: 8px 10px;
            transition: all 0.2s;
            min-width: 70px;
        }
        .nav-item.active {
            color: #4903fc; /* Ganti warna ungu jadi biru #4903fc */
        }
        .nav-icon {
            font-size: 18px;
            margin-bottom: 3px;
        }
        .nav-label {
            font-weight: 500;
            letter-spacing: 0.5px;
        }
        /* ===== ANIMATION ===== */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in {
            animation: fadeIn 0.3s ease;
        }
        /* ===== CHARACTER COUNTER ===== */
        .char-counter {
            text-align: right;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.4);
            margin-bottom: 15px;
        }
        /* ===== EMOJI BAR BELOW ARTEFAK ===== */
        .artefak-emoji-bar {
            display: flex;
            justify-content: flex-end;
            gap: 12px;
            padding: 8px 0;
            margin-top: 8px;
            border-top: 1px solid rgba(73, 3, 252, 0.1); /* Ganti warna ungu jadi biru #4903fc */
        }
        .artefak-emoji-btn {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.7);
            font-size: 18px;
            cursor: pointer;
            padding: 4px 8px;
            border-radius: 4px;
            transition: color 0.2s;
        }
        .artefak-emoji-btn:hover {
            color: #4903fc; /* Ganti warna ungu jadi biru #4903fc */
        }
        .artefak-emoji-btn.active {
            color: #4903fc; /* Ganti warna ungu jadi biru #4903fc */
        }
    </style>
</head>
<body>
    <!-- POST MODAL -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal">
            <!-- Modal content will be injected here -->
        </div>
    </div>
    <!-- BOTTOM NAVIGATION -->
    <div class="bottom-nav" id="bottomNav" style="display: none;">
        <a href="#" class="nav-item active" onclick="showTab('jejak')">
            <div class="nav-icon">üìù</div>
            <div class="nav-label">Jejak</div>
        </a>
        <a href="#" class="nav-item" onclick="showTab('jalan')">
            <div class="nav-icon">üö∂</div>
            <div class="nav-label">Jalan</div>
        </a>
        <a href="#" class="nav-item" onclick="showTab('dunia')">
            <div class="nav-icon">üåç</div>
            <div class="nav-label">Dunia</div>
        </a>
    </div>
    <!-- LOGIN PAGE -->
    <div id="login" class="page active">
        <div class="logo">NOPE</div>
        <input type="text" 
               class="nope-input" 
               id="usernameInput"
               placeholder="nama_kamu"
               autocomplete="off"
               autocapitalize="none"
               spellcheck="false">
        <div class="user-status" id="userStatus"></div>
        <div class="hint">
            gunakan huruf, angka, underscore ‚Ä¢ minimal 3 karakter
        </div>
        <div class="hint">
            tekan <strong>enter</strong> untuk masuk
        </div>
        <div class="hint mt-20">
            3#, jurnal, artefak tersimpan selamanya
        </div>
    </div>
    <!-- ONBOARDING PAGE -->
    <div id="onboarding" class="page">
        <div class="logo">NOPE</div>
        <div class="zona-header">
            <div class="zona-title">Pilih 1# dari masing-masing 3 zona</div>
        </div>
        <!-- Zona 1: PopCulture -->
        <div class="zona-card">
            <div class="zona-card-header">
                <div>
                    <div class="zona-card-name">PopCulture</div>
                    <div class="zona-card-desc">Film, musik, meme, tren viral</div>
                </div>
                <div class="zona-card-counter" id="popcultureCounter">0/1</div>
            </div>
            <div class="hashtag-list" id="popcultureList"></div>
        </div>
        <!-- Zona 2: PersonalPain -->
        <div class="zona-card">
            <div class="zona-card-header">
                <div>
                    <div class="zona-card-name">PersonalPain</div>
                    <div class="zona-card-desc">Kecemasan, trauma, healing, self-care</div>
                </div>
                <div class="zona-card-counter" id="personalpainCounter">0/1</div>
            </div>
            <div class="hashtag-list" id="personalpainList"></div>
        </div>
        <!-- Zona 3: SocialSickness -->
        <div class="zona-card">
            <div class="zona-card-header">
                <div>
                    <div class="zona-card-name">SocialSickness</div>
                    <div class="zona-card-desc">Toxic relationship, FOMO, loneliness</div>
                </div>
                <div class="zona-card-counter" id="socialsicknessCounter">0/1</div>
            </div>
            <div class="hashtag-list" id="socialsicknessList"></div>
        </div>
        <!-- Action Button -->
        <button class="action-btn" id="saveBtn" onclick="saveSelections()" disabled>
            Lanjutkan
        </button>
    </div>
    <!-- JEJAK PAGE -->
    <div id="jejak" class="page" style="padding-top: 80px;">
        <div class="logo">NOPE</div>
        <!-- Artefak Preview -->
        <div class="artefak-preview-container" id="artefakPreviewContainer"></div>
        <!-- Rant Box -->
        <div class="rant-box-container">
            <!-- Tidak ada judul "Tulis Rant mu" -->
            <div class="rant-box-header">
                <!-- Judul dihapus -->
                <div class="rant-box-counter" id="rantCounter">0/300</div>
            </div>
            <textarea 
                class="rant-box" 
                id="rantBox" 
                placeholder="Perasaanmu dalam 300 huruf" 
                maxlength="300" 
                rows="5"
            ></textarea>
            <div class="rant-box-footer">
                <select class="rant-hashtag-select" id="rantHashtagSelect"></select>
                <button class="action-btn" style="padding: 8px 16px; font-size: 14px;" onclick="postRantFromBox()">
                    Gaskeun!
                </button>
            </div>
        </div>
        <!-- Recent Rants -->
        <div class="recent-rants">
            <div class="section-header">
                <div class="section-title">Jejakmu</div> <!-- Ganti "Rant Terbaru" -->
                <div class="section-view-all" onclick="viewAllRants()">Lihat semua</div>
            </div>
            <div class="recent-rants-list" id="recentRantsList">
                <!-- Recent rants will be populated by JavaScript -->
            </div>
        </div>
        <!-- Recent Artefaks Grid -->
        <div class="recent-artefaks">
            <div class="section-header">
                <div class="section-title">Artefak Terbaru</div>
                <div class="section-view-all" onclick="viewAllArtefaks()">Lihat semua</div>
            </div>
            <div class="artefaks-grid" id="artefaksGrid">
                <!-- Recent artefaks will be populated by JavaScript -->
            </div>
        </div>
    </div>
    <!-- JALAN PAGE -->
    <div id="jalan" class="page">
        <div class="logo">NOPE</div>
        <div class="jalan-header">
            <div class="jalan-title">Jalan mu</div>
        </div>
        <!-- Tab Navigation -->
        <div class="jalan-tab-nav">
            <button class="jalan-tab-btn active" onclick="showJalanTab('frekuensi')">Frekuensi</button>
            <button class="jalan-tab-btn" onclick="showJalanTab('gelombang')">Gelombang</button>
            <button class="jalan-tab-btn" onclick="showJalanTab('movement')">Movement</button>
        </div>
        <!-- Frekuensi Tab -->
        <div id="jalan-frekuensi" class="jalan-tab-content">
            <div class="section-header">
                <div class="section-title">3# pilihan mu</div>
            </div>
            <div class="recent-rants-list compact" id="frekuensiList"></div>
        </div>
        <!-- Gelombang Tab -->
        <div id="jalan-gelombang" class="jalan-tab-content" style="display:none;">
            <div class="section-header">
                <div class="section-title">Gelombang Global</div>
            </div>
            <div class="recent-rants-list compact" id="gelombangList"></div>
        </div>
        <!-- Movement Tab -->
        <div id="jalan-movement" class="jalan-tab-content" style="display:none;">
            <div class="section-header">
                <div class="section-title">Movement</div>
            </div>
            <div class="recent-rants-list compact" id="movementList"></div>
        </div>
        <!-- Hashtag terpilih -->
        <div class="zona-card" style="margin-top: 20px;">
            <div class="zona-card-header" style="padding-bottom:8px;margin-bottom:10px;">
                <div>
                    <div class="zona-card-name" style="font-size:16px;">Frekuensi mu</div>
                </div>
            </div>
            <div id="selectedHashtagsList" style="display:flex;gap:8px;flex-wrap:wrap;"></div>
        </div>
    </div>
    <!-- DUNIA PAGE -->
    <div id="dunia" class="page">
        <div class="logo">NOPE</div>
        <div class="dunia-header">
            <div class="dunia-title">Dunia mu</div>
            <div class="dunia-subtitle">
                Profil dan pengaturan
            </div>
        </div>
        <div class="profile-card">
            <div class="profile-username" id="profileUsername">@username</div>
            <div class="profile-meta" id="profileJoinDate">Bergabung: -</div>
            <div class="profile-meta" id="profileActivity">Aktivitas: 0 posting</div>
        </div>
        <div class="action-btn" onclick="showArtefakModal()" style="margin-top: 10px;">
            + Tambah Artefak
        </div>
        <div class="action-btn secondary" onclick="exportData()" style="margin-top: 10px;">
            üì§ Export Data
        </div>
        <div class="action-btn secondary" onclick="showHashtagsModal()" style="margin-top: 10px;">
            üëÅÔ∏è Lihat # terpilih
        </div>
        <div class="action-btn secondary" onclick="logout()" style="background: rgba(255,50,50,0.1); border-color: rgba(255,50,50,0.3); margin-top: 20px;">
            üö™ Keluar
        </div>
    </div>
    <script>
        // ===== STATE =====
        let currentUser = null;
        let currentTab = 'jejak';
        // ===== SELECTED HASHTAGS =====
        let selectedHashtags = {
            popculture: null,
            personalpain: null,
            socialsickness: null
        };
        // ===== DATA STRUCTURE =====
        const zonaData = {
            popculture: {
                name: "PopCulture",
                description: "Film, musik, meme, tren viral",
                hashtags: [
                    { name: "#FilmEndingGaje", microcopy: "capek nunggu akhir yang masuk akal. hidup aja nggak pernah adil." },
                    { name: "#InfluencerNgehek", microcopy: "liat konten ‚Äòhidup sempurna‚Äô, pas DM minta endorse malah auto read." },
                    { name: "#BeliTiketJualGinjal", microcopy: "harga tiket konser = 3 bulan gaji magang. tapi hati bilang: worth it." },
                    { name: "#HealingPayLater", microcopy: "self-care pakai cicilan. besok stres, hari ini bahagia dulu." }
                ]
            },
            personalpain: {
                name: "PersonalPain",
                description: "Kecemasan, trauma, healing, self-care",
                hashtags: [
                    { name: "#SayNOPE", microcopy: "bukan sombong. cuma lagi butuh ruang untuk pulih." },
                    { name: "#DiGhostingGebetan", microcopy: "ditinggal tanpa kabar, tapi masih ngecek story-nya tiap malam." },
                    { name: "#CapekPuraPura", microcopy: "senyum di WA, nangis di kamar mandi." },
                    { name: "#DiamDiamNangis", microcopy: "nangis tanpa suara, biar nggak jadi beban buat orang." }
                ]
            },
            socialsickness: {
                name: "SocialSickness",
                description: "Toxic relationship, FOMO, loneliness",
                hashtags: [
                    { name: "#MagangDibayarSerifikat", microcopy: "kerja 8 jam, upahnya cuma kertas yang nggak bisa bayar kos." },
                    { name: "#KeluarWAGroup", microcopy: "tinggalkan grup yang bikin anxiety, bukan kehilangan teman." },
                    { name: "#TemenLambeTurah", microcopy: "curhat dikira rahasia, eh besok jadi bahan gosip." },
                    { name: "#GajianSejamAbis", microcopy: "gajian pagi, siang udah nol. tapi tetap dipanggil ‚Äòpelit‚Äô." }
                ]
            }
        };
        // ===== STORAGE HELPERS =====
        function getUsers() {
            const usersJson = localStorage.getItem('nope_users');
            return usersJson ? JSON.parse(usersJson) : {};
        }
        function saveUsers(users) {
            localStorage.setItem('nope_users', JSON.stringify(users));
        }
        function getUserData(username) {
            const users = getUsers();
            return users[username] || null;
        }
        function saveUserData(username, data) {
            const users = getUsers();
            users[username] = data;
            saveUsers(users);
        }
        // ===== DUMMY DATA INITIALIZATION =====
        function initializeDummyData() {
            const users = getUsers();
            if (Object.keys(users).length > 0) return;
            const now = Date.now();
            const dummyUsers = [
                // === FREKUENSI (5 user - mirip user nyata) ===
                {
                    username: "diamdiamaja",
                    hashtags: ["#SayNOPE", "#CapekPuraPura", "#DiamDiamNangis"],
                    rant: "bilang gue baik-baik aja padahal hati lagi kacau. capek jadi tempat curhat tapi gak pernah boleh curhat.",
                    artefak: {
                        title: "kopi dingin",
                        content: "minum sendirian jam 3 pagi. gajian belum turun, besok bayar kos."
                    }
                },
                {
                    username: "ghosted_aja",
                    hashtags: ["#DiGhostingGebetan", "#CapekPuraPura", "#FilmEndingGaje"],
                    rant: "udah 3 minggu dia ngilang. gue cek story-nya tiap malem. padahal cuma nanya 'udah makan?'",
                    artefak: {
                        title: "notifikasi kosong",
                        content: "kotak chat belum terkirim. niat nanya kabar aja susah."
                    }
                },
                {
                    username: "maganggratis",
                    hashtags: ["#MagangDibayarSerifikat", "#GajianSejamAbis", "#HealingPayLater"],
                    rant: "kerja 9 jam, pulang bawa serifikat. ibu bilang 'itu investasi'. investasi buat apa, bu? buat bayar listrik?",
                    artefak: {
                        title: "serifikat gulung",
                        content: "dikasih frame, tapi gak ada duit buat beli bingkai."
                    }
                },
                {
                    username: "temenpalsu",
                    hashtags: ["#TemenLambeTurah", "#KeluarWAGroup", "#InfluencerNgehek"],
                    rant: "curhat soal gebetan, eh besok jadi bahan gosip di grup. sekarang gue milih sendiri aja.",
                    artefak: {
                        title: "chat terhapus",
                        content: "percaya itu mahal. gue udah bangkrut."
                    }
                },
                {
                    username: "konserginjal",
                    hashtags: ["#BeliTiketJualGinjal", "#HealingPayLater", "#FilmEndingGaje"],
                    rant: "tiket konser habis 1.2 juta. gaji magang 800rb. tapi malam itu gue nangis bahagia. worth it.",
                    artefak: {
                        title: "tiket sobek",
                        content: "masih genggam erat pas pulang naik angkot."
                    }
                },
                // === GELOMBANG (5 user - acak) ===
                {
                    username: "fomo_gabut",
                    hashtags: ["#FOMO", "#GajianSejamAbis", "#CapekPuraPura"],
                    rant: "liat temen pada liburan, gue diem di kos. bilangnya lagi hemat, padahal emang gak diajak.",
                    artefak: {
                        title: "layar gelap",
                        content: "scroll story terus sampe mata perih."
                    }
                },
                {
                    username: "kerja_tapi_sakit",
                    hashtags: ["#MagangDibayarSerifikat", "#PersonalPain", "#DiamDiamNangis"],
                    rant: "kerja remote, boss bilang 'ini kesempatan'. gue nangis di kamar mandi tiap jam 10 pagi.",
                    artefak: {
                        title: "obat kadaluarsa",
                        content: "gak sempat beli yang baru. minum aja dulu."
                    }
                },
                {
                    username: "film_baper",
                    hashtags: ["#FilmEndingGaje", "#PersonalPain", "#SayNOPE"],
                    rant: "ending film kocak tapi gue nangis. kayaknya ceritanya tentang gue yang takut ngomong jujur.",
                    artefak: {
                        title: "tisu basah",
                        content: "nonton sendirian di kamar. malu sama suara nangis sendiri."
                    }
                },
                {
                    username: "sosmedmakehappy",
                    hashtags: ["#SocialSickness", "#InfluencerNgehek", "#HealingPayLater"],
                    rant: "posting 'hari bahagia!' padahal lagi bokek. biar dikira oke. padahal butuh peluk.",
                    artefak: {
                        title: "wajah tersenyum",
                        content: "edit 10 kali biar keliatan bahagia."
                    }
                },
                {
                    username: "keluargatausalah",
                    hashtags: ["#PersonalPain", "#CapekPuraPura", "#DiamDiamNangis"],
                    rant: "pulang kampung, ditanya 'kapan nikah?'. gue jawab 'belom nemu'. padahal gue takut gak layak dicintai.",
                    artefak: {
                        title: "tiket pulang",
                        content: "kembali ke kos setelah lebaran. sendirian lagi."
                    }
                },
                // === MOVEMENT (5 user - isu sosial) ===
                {
                    username: "edukasiuntuksemua",
                    hashtags: ["#PendidikanUntukSemua", "#Movement", "#SayNOPE"],
                    rant: "temen gue putus sekolah karena orangtuanya gak mampu. gue bantu ngajar tiap minggu. ini bukan amal, ini hak.",
                    artefak: {
                        title: "buku coretan",
                        content: "dikasih gratis. semoga cukup buat dia lulus."
                    }
                },
                {
                    username: "buruhmuda",
                    hashtags: ["#JanganExploitBuruh", "#Movement", "#MagangDibayarSerifikat"],
                    rant: "magang 6 bulan, gak dibayar, bilangnya 'kesempatan'. kesempatan buat siapa? buat perusahaan yang hemat gaji!",
                    artefak: {
                        title: "seragam kusut",
                        content: "dipakai tiap hari selama 6 bulan. gak ganti, gak bayar."
                    }
                },
                {
                    username: "fundingsolidaritas",
                    hashtags: ["#FUNDINGSolidaritasDiam", "#Movement", "#PersonalPain"],
                    rant: "kumpulin uang buat temen yang kena PHK diam-diam. gak perlu pamer. yang penting dia bisa makan besok.",
                    artefak: {
                        title: "duit receh",
                        content: "dikasih perlahan. gak perlu tau siapa yang kirim."
                    }
                },
                {
                    username: "petisiantiras",
                    hashtags: ["#PetisiTerbuka", "#Movement", "#SocialSickness"],
                    rant: "kampus gue tutup program beasiswa buat mahasiswa miskin. gue bikin petisi. tanda tangan aja, gak perlu komen.",
                    artefak: {
                        title: "print petisi",
                        content: "ditempel di papan kos. semoga ada yang baca."
                    }
                },
                {
                    username: "solidaritassistem",
                    hashtags: ["#PendidikanUntukSemua", "#Movement", "#SocialSickness"],
                    rant: "gak semua orang punya privilege kuliah kayak gue. gue wajib bantu yang gak seberuntung gue.",
                    artefak: {
                        title: "modul fotokopi",
                        content: "dikasih gratis ke adik angkatan. semoga dia gak putus kuliah."
                    }
                }
            ];
            // Buat dummy user
            dummyUsers.forEach((user, i) => {
                users[user.username] = {
                    username: user.username,
                    created: now - (15 - i) * 24 * 60 * 60 * 1000,
                    lastLogin: now - (15 - i) * 24 * 60 * 60 * 1000,
                    onboarded: true,
                    selectedHashtags: {
                        popculture: user.hashtags.find(h => zonaData.popculture.hashtags.some(t => t.name === h)) || null,
                        personalpain: user.hashtags.find(h => zonaData.personalpain.hashtags.some(t => t.name === h)) || null,
                        socialsickness: user.hashtags.find(h => zonaData.socialsickness.hashtags.some(t => t.name === h)) || null,
                        movement: user.hashtags.find(h => ["#PendidikanUntukSemua","#JanganExploitBuruh","#FUNDINGSolidaritasDiam","#PetisiTerbuka"].includes(h)) || null
                    },
                    rants: [{
                        content: user.rant,
                        hashtag: user.hashtags[Math.floor(Math.random()*user.hashtags.length)],
                        date: now - (15 - i) * 24 * 60 * 60 * 1000
                    }],
                    artefacts: [{
                        title: user.artefak.title,
                        content: user.artefak.content,
                        date: now - (15 - i) * 24 * 60 * 60 * 1000 + 10000
                    }]
                };
            });
            saveUsers(users);
        }
        // ===== SAFE INIT APP =====
        function initializeApp() {
            initializeDummyData();
            const savedUser = localStorage.getItem('nope_current_user');
            if (savedUser) {
                currentUser = savedUser;
                const userData = getUserData(currentUser);
                if (userData && userData.onboarded) {
                    showPage('jejak');
                } else if (userData) {
                    showPage('onboarding');
                } else {
                    currentUser = null;
                    localStorage.removeItem('nope_current_user');
                    showPage('login');
                }
            } else {
                showPage('login');
            }
        }
        // ===== SHOW PAGE & TAB =====
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active','fade-in'));
            const p = document.getElementById(pageId);
            if (p) {
                p.classList.add('active','fade-in');
                const nav = document.getElementById('bottomNav');
                if (['jejak','jalan','dunia'].includes(pageId)) {
                    nav.style.display = 'flex';
                    updateNavActive(pageId);
                } else {
                    nav.style.display = 'none';
                }
                switch(pageId) {
                    case 'login': initLoginPage(); break;
                    case 'onboarding': initOnboardingPage(); break;
                    case 'jejak': initJejakPage(); break;
                    case 'jalan': initJalanPage(); break;
                    case 'dunia': initDuniaPage(); break;
                }
            }
        }
        function showTab(tabId) { showPage(tabId); }
        function updateNavActive(activeTab) {
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            const btn = document.querySelector(`.nav-item[onclick*="${activeTab}"]`);
            if (btn) btn.classList.add('active');
        }
        // ===== LOGIN =====
        function initLoginPage() {
            const input = document.getElementById('usernameInput');
            const status = document.getElementById('userStatus');
            input.value = '';
            input.focus();
            status.style.display = 'none';
            const newInput = input.cloneNode(true);
            input.parentNode.replaceChild(newInput, input);
            const el = document.getElementById('usernameInput');
            el.addEventListener('keydown', e => { if (e.key === 'Enter') processLogin(); });
            el.addEventListener('input', function() {
                let u = this.value.trim().toLowerCase();
                if (u.length < 3) { status.style.display = 'none'; return; }
                let f = u.replace(/\s+/g, '_').replace(/[^a-z0-9_]/g, '');
                if (u !== f) this.value = f;
                const d = getUserData(f);
                status.style.display = 'block';
                if (d) {
                    status.textContent = d.onboarded ? 
                        `@${f} sudah ada ‚Ä¢ tekan enter untuk login` : 
                        `@${f} belum onboarding ‚Ä¢ tekan enter untuk lanjut`;
                } else {
                    status.textContent = `@${f} akan dibuat baru`;
                }
            });
        }
        function processLogin() {
            let u = document.getElementById('usernameInput').value.trim().toLowerCase();
            if (u.length < 3) { alert('Username minimal 3 karakter!'); return; }
            u = u.replace(/\s+/g, '_').replace(/[^a-z0-9_]/g, '');
            if (u.length < 3) { alert('Username hanya boleh huruf, angka, underscore!'); return; }
            currentUser = u;
            localStorage.setItem('nope_current_user', u);
            let d = getUserData(u);
            if (!d) {
                d = { username: u, created: Date.now(), lastLogin: Date.now(), selectedHashtags: null, onboarded: false, rants: [], artefacts: [] };
                saveUserData(u, d);
                showPage('onboarding');
            } else {
                d.lastLogin = Date.now();
                saveUserData(u, d);
                showPage(d.onboarded ? 'jejak' : 'onboarding');
            }
        }
        // ===== ONBOARDING =====
        function initOnboardingPage() {
            if (!currentUser) return showPage('login');
            const d = getUserData(currentUser);
            if (d && d.onboarded) return showPage('jejak');
            selectedHashtags = d && d.selectedHashtags ? { ...d.selectedHashtags } : { popculture: null, personalpain: null, socialsickness: null };
            ['popculture','personalpain','socialsickness'].forEach(z => renderHashtags(z));
            updateCounters();
        }
        function renderHashtags(z) {
            const c = document.getElementById(z + 'List');
            const zona = zonaData[z];
            c.innerHTML = '';
            zona.hashtags.forEach(h => {
                const sel = selectedHashtags[z] === h.name;
                const div = document.createElement('div');
                div.className = `hashtag-item ${sel ? 'selected' : ''}`;
                div.onclick = () => selectHashtag(z, h.name);
                div.innerHTML = `<div class="hashtag-name">${h.name}</div><div class="hashtag-microcopy">${h.microcopy}</div>`;
                c.appendChild(div);
            });
        }
        function selectHashtag(z, h) {
            selectedHashtags[z] = selectedHashtags[z] === h ? null : h;
            renderHashtags(z);
            updateCounters();
        }
        function updateCounters() {
            document.getElementById('popcultureCounter').textContent = `${selectedHashtags.popculture ? '1' : '0'}/1`;
            document.getElementById('personalpainCounter').textContent = `${selectedHashtags.personalpain ? '1' : '0'}/1`;
            document.getElementById('socialsicknessCounter').textContent = `${selectedHashtags.socialsickness ? '1' : '0'}/1`;
            const total = Object.values(selectedHashtags).filter(h => h).length;
            document.getElementById('saveBtn').disabled = total !== 3;
        }
        function saveSelections() {
            if (!currentUser) return;
            const d = getUserData(currentUser);
            d.selectedHashtags = selectedHashtags;
            d.onboarded = true;
            d.lastLogin = Date.now();
            saveUserData(currentUser, d);
            document.getElementById('saveBtn').textContent = 'Menyimpan...';
            document.getElementById('saveBtn').disabled = true;
            setTimeout(() => showPage('jejak'), 600);
        }
        // ===== JEJAK =====
        function initJejakPage() {
            if (!currentUser) return showPage('login');
            const d = getUserData(currentUser);
            setupRantBox();
            renderArtefakPreview();
            renderRecentRants();
            renderRecentArtefaks();
        }
        function setupRantBox() {
            const d = getUserData(currentUser);
            const box = document.getElementById('rantBox');
            const counter = document.getElementById('rantCounter');
            box.addEventListener('input', () => counter.textContent = `${box.value.length}/300`);
            const sel = document.getElementById('rantHashtagSelect');
            sel.innerHTML = '<option value="">Pilih hashtag...</option>';
            if (d.selectedHashtags) {
                Object.values(d.selectedHashtags).forEach(h => {
                    if (h) {
                        const opt = document.createElement('option');
                        opt.value = h;
                        opt.textContent = h;
                        sel.appendChild(opt);
                    }
                });
            }
            if (sel.options.length > 1) sel.selectedIndex = 1;
            box.value = '';
            counter.textContent = '0/300';
        }
        function renderArtefakPreview() {
            const c = document.getElementById('artefakPreviewContainer');
            const d = getUserData(currentUser);
            if (!d.artefacts || d.artefacts.length === 0) {
                c.innerHTML = `<div class="artefak-preview" onclick="showArtefakModal()">
                    <div class="artefak-preview-image"><div class="artefak-placeholder">üñºÔ∏è</div></div>
                    <div class="artefak-preview-info">
                        <div class="artefak-preview-title">üìÅ Belum ada artefak</div>
                        <div class="artefak-preview-date">Klik untuk menambahkan artefak pertama mu</div>
                    </div>
                    <!-- Emoji Bar Below Artefak -->
                    <div class="artefak-emoji-bar">
                        <button class="artefak-emoji-btn" onclick="reactToArtefak('guejuga')" title="GueJuga">üëç</button>
                        <button class="artefak-emoji-btn" onclick="reactToArtefak('peluk')" title="Peluk">ü´Ç</button>
                        <button class="artefak-emoji-btn" onclick="reactToArtefak('bangga')" title="Bangga">üëè</button>
                        <button class="artefak-emoji-btn" onclick="reactToArtefak('unggah')" title="Unggah">üì§</button>
                    </div>
                </div>`;
                return;
            }
            const latest = d.artefacts[d.artefacts.length - 1];
            const date = new Date(latest.date).toLocaleDateString('id-ID', { day: 'numeric', month: 'long', year: 'numeric' });
            c.innerHTML = `<div class="artefak-preview" onclick="viewArtefak(${d.artefacts.length - 1})">
                <div class="artefak-preview-image"><div class="artefak-placeholder">üìÅ</div></div>
                <div class="artefak-preview-info">
                    <div class="artefak-preview-title">üìÅ ${latest.title}</div>
                    <div class="artefak-preview-date">Ditambahkan: ${date}</div>
                </div>
                <!-- Emoji Bar Below Artefak -->
                <div class="artefak-emoji-bar">
                    <button class="artefak-emoji-btn" onclick="reactToArtefak('guejuga')" title="GueJuga">üëç</button>
                    <button class="artefak-emoji-btn" onclick="reactToArtefak('peluk')" title="Peluk">ü´Ç</button>
                    <button class="artefak-emoji-btn" onclick="reactToArtefak('bangga')" title="Bangga">üëè</button>
                    <button class="artefak-emoji-btn" onclick="reactToArtefak('unggah')" title="Unggah">üì§</button>
                </div>
            </div>`;
        }
        function renderRecentRants() {
            const c = document.getElementById('recentRantsList');
            const d = getUserData(currentUser);
            if (!d.rants || d.rants.length === 0) {
                // Tampilkan 3 dummy rant jika belum ada postingan
                const dummyRants = [
                    { content: "Gue juga ngerasain... capek banget. Kadang pengen nangis aja.", date: Date.now() - 3600000, hashtag: "#CapekPuraPura" }, // Pendek
                    { content: "Gue ngerasain kayak dijebak sama hidup. Kerjaan banyak, gaji kecil, bos galak, pacar ngilang. Kayaknya gue harus istirahat dulu.", date: Date.now() - 7200000, hashtag: "#SayNOPE" }, // Sedang
                    { content: "Hari ini gue ngerasain semua emosi sekaligus. Senang karena dapet kerjaan baru, sedih karena harus tinggalin rumah, takut karena belum siap, dan marah karena gak ada yang ngerti. Mungkin ini namanya dewasa? Atau cuma kelelahan?", date: Date.now() - 10800000, hashtag: "#DiamDiamNangis" } // Panjang
                ];
                c.innerHTML = '';
                dummyRants.forEach(r => {
                    const date = new Date(r.date).toLocaleDateString('id-ID', { day: 'numeric', month: 'short', hour: '2-digit', minute: '2-digit' });
                    const content = r.content.length > 100 ? r.content.substring(0, 100) + '...' : r.content;
                    const div = document.createElement('div');
                    div.className = 'recent-rant-item';
                    div.onclick = () => viewRantDetails(r);
                    div.innerHTML = `<div class="recent-rant-date">${date} ‚Ä¢ ${r.hashtag || ''}</div><div class="recent-rant-content">${content}</div>`;
                    c.appendChild(div);
                });
                return;
            }
            const rants = d.rants.slice(-3).reverse();
            c.innerHTML = '';
            rants.forEach(r => {
                const date = new Date(r.date).toLocaleDateString('id-ID', { day: 'numeric', month: 'short', hour: '2-digit', minute: '2-digit' });
                const content = r.content.length > 100 ? r.content.substring(0, 100) + '...' : r.content;
                const div = document.createElement('div');
                div.className = 'recent-rant-item';
                div.onclick = () => viewRantDetails(r);
                div.innerHTML = `<div class="recent-rant-date">${date} ‚Ä¢ ${r.hashtag || ''}</div><div class="recent-rant-content">${content}</div>`;
                c.appendChild(div);
            });
        }
        function renderRecentArtefaks() {
            const c = document.getElementById('artefaksGrid');
            const d = getUserData(currentUser);
            if (!d.artefacts || d.artefacts.length === 0) {
                c.innerHTML = `<div class="artefak-grid-item" style="grid-column:1/-1;text-align:center;color:rgba(255,255,255,0.4);">Belum ada artefak. Tambah artefak untuk dokumentasi!</div>`;
                return;
            }
            const artefaks = d.artefacts.slice(-6).reverse();
            c.innerHTML = '';
            artefaks.forEach((a, i) => {
                const date = new Date(a.date).toLocaleDateString('id-ID', { day: 'numeric', month: 'short' });
                const title = a.title.length > 20 ? a.title.substring(0, 20) + '...' : a.title;
                const div = document.createElement('div');
                div.className = 'artefak-grid-item';
                div.onclick = () => viewArtefakDetails(d.artefacts.length - 1 - i);
                div.innerHTML = `<div class="artefak-grid-image"><div class="artefak-grid-icon">üìÅ</div></div><div class="artefak-grid-title">${title}</div><div class="artefak-grid-date">${date}</div>`;
                c.appendChild(div);
            });
        }
        function postRantFromBox() {
            const content = document.getElementById('rantBox').value.trim();
            const hashtag = document.getElementById('rantHashtagSelect').value;
            if (!content) { alert('Tulis rant terlebih dahulu!'); return; }
            if (!hashtag) { alert('Pilih hashtag terlebih dahulu!'); return; }
            if (!currentUser) return;
            const d = getUserData(currentUser);
            if (!d.rants) d.rants = [];
            d.rants.push({ content, hashtag, date: Date.now() });
            d.lastLogin = Date.now();
            saveUserData(currentUser, d);
            document.getElementById('rantBox').value = '';
            document.getElementById('rantCounter').textContent = '0/300';
            renderRecentRants();
            showToast('Rant berhasil diposting!');
        }
        // ===== JALAN =====
        function initJalanPage() {
            if (!currentUser) return showPage('login');
            const d = getUserData(currentUser);
            renderSelectedHashtags();
            renderFrekuensiFeed();
            renderGelombangFeed();
            renderMovementFeed();
            showJalanTab('frekuensi');
        }
        function renderSelectedHashtags() {
            const c = document.getElementById('selectedHashtagsList');
            const d = getUserData(currentUser);
            if (!d.selectedHashtags) {
                c.innerHTML = '<div class="hint">Belum memilih hashtag</div>';
                return;
            }
            c.innerHTML = '';
            Object.entries(d.selectedHashtags).forEach(([z, h]) => {
                if (h) {
                    const span = document.createElement('span');
                    span.style.padding = '4px 8px';
                    span.style.background = 'rgba(73, 3, 252, 0.1)'; /* Ganti warna ungu jadi biru #4903fc */
                    span.style.borderRadius = '6px';
                    span.style.fontSize = '12px';
                    span.style.color = '#4903fc'; /* Ganti warna ungu jadi biru #4903fc */
                    span.textContent = h;
                    c.appendChild(span);
                }
            });
        }
        function showJalanTab(tab) {
            ['frekuensi','gelombang','movement'].forEach(t => {
                document.getElementById(`jalan-${t}`).style.display = t === tab ? 'block' : 'none';
            });
            document.querySelectorAll('.jalan-tab-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        }
        function renderFeeds(feedId, containerId, filterFunc) {
            const c = document.getElementById(containerId);
            const allUsers = getUsers();
            let allRants = [];
            for (const u in allUsers) {
                const user = allUsers[u];
                if (user.rants) user.rants.forEach(r => {
                    const rWithUser = {...r, username: u};
                    if (!filterFunc || filterFunc(rWithUser, user)) allRants.push(rWithUser);
                });
            }
            if (allRants.length === 0) {
                c.innerHTML = `<div class="recent-rant-item compact" style="text-align:center;padding:16px;color:rgba(255,255,255,0.4);">Belum ada rant di ${feedId}.</div>`;
                return;
            }
            allRants.sort((a, b) => b.date - a.date);
            const top7 = allRants.slice(0, 7);
            c.innerHTML = top7.map(r => {
                const date = new Date(r.date).toLocaleDateString('id-ID', { day: 'numeric', month: 'short' });
                const content = r.content.length > 100 ? r.content.substring(0, 100) + '...' : r.content;
                return `
                    <div class="recent-rant-item compact">
                        <div class="recent-rant-date compact">${date} ‚Ä¢ @${r.username}</div>
                        <div class="recent-rant-content compact">${content}</div>
                        <div class="rant-actions">
                            <div class="rant-emoji-bar">
                                <button class="emoji-btn" onclick="reactToRant('${r.username}', ${r.date}, 'üòî')">üòî</button>
                                <button class="emoji-btn" onclick="reactToRant('${r.username}', ${r.date}, 'ü´Ç')">ü´Ç</button>
                                <button class="emoji-btn" onclick="reactToRant('${r.username}', ${r.date}, 'üî•')">üî•</button>
                            </div>
                            <a href="#" class="comment-link" onclick="commentOnRant('${r.username}', ${r.date}); return false;">tulis komentar</a>
                        </div>
                    </div>
                `;
            }).join('');
        }
        function renderFrekuensiFeed() {
            const d = getUserData(currentUser);
            if (!d || !d.selectedHashtags) {
                document.getElementById('frekuensiList').innerHTML = '<div class="recent-rant-item compact" style="text-align:center;padding:16px;color:rgba(255,255,255,0.4);">Belum memilih frekuensi</div>';
                return;
            }
            const userH = new Set(Object.values(d.selectedHashtags).filter(h => h));
            renderFeeds('Frekuensi', 'frekuensiList', (r, user) => {
                if (!user.selectedHashtags) return false;
                const theirH = new Set(Object.values(user.selectedHashtags).filter(h => h));
                return userH.size === 3 && theirH.size === 3 && [...userH].every(h => theirH.has(h));
            });
        }
        function renderGelombangFeed() {
            renderFeeds('Gelombang', 'gelombangList');
        }
        function renderMovementFeed() {
            const movementH = new Set(["#PendidikanUntukSemua","#JanganExploitBuruh","#FUNDINGSolidaritasDiam","#PetisiTerbuka"]);
            renderFeeds('Movement', 'movementList', (r) => movementH.has(r.hashtag));
        }
        // ===== REAKSI & KOMENTAR =====
        function reactToRant(targetUser, rantDate, emoji) {
            if (!currentUser) return;
            const users = getUsers();
            const target = users[targetUser];
            if (!target || !target.rants) return;
            const rant = target.rants.find(r => r.date === rantDate);
            if (!rant) return;
            if (!rant.reactions) rant.reactions = {};
            rant.reactions[emoji] = (rant.reactions[emoji] || 0) + 1;
            rant.reactedBy = rant.reactedBy || {};
            rant.reactedBy[currentUser] = emoji;
            saveUsers(users);
            showToast(`Merespon dengan ${emoji}`);
            renderFrekuensiFeed();
        }
        function commentOnRant(targetUser, rantDate) {
            showModal(`
                <div class="modal-header">
                    <div class="modal-title">Tulis Komentar</div>
                    <button class="modal-close" onclick="hideModal()">√ó</button>
                </div>
                <div style="margin-bottom:12px;color:rgba(255,255,255,0.6);font-size:13px;">Hanya kamu dan pemilik rant yang bisa melihat</div>
                <textarea class="textarea-input" id="commentBox" placeholder="Komentarmu..." maxlength="200" style="min-height:100px;"></textarea>
                <div style="text-align:right;font-size:11px;color:rgba(255,255,255,0.4);margin:6px 0;">0/200</div>
                <button class="action-btn" onclick="saveComment('${targetUser}', ${rantDate})">Kirim Komentar</button>
            `);
            const ta = document.getElementById('commentBox');
            const co = ta.nextElementSibling;
            ta.addEventListener('input', () => co.textContent = `${ta.value.length}/200`);
        }
        function saveComment(targetUser, rantDate) {
            const comment = document.getElementById('commentBox').value.trim();
            if (!comment) { alert('Tulis komentar dulu!'); return; }
            if (!currentUser) return;
            const users = getUsers();
            const target = users[targetUser];
            if (!target || !target.rants) return;
            const rant = target.rants.find(r => r.date === rantDate);
            if (!rant) return;
            if (!rant.comments) rant.comments = [];
            rant.comments.push({ from: currentUser, text: comment, date: Date.now() });
            saveUsers(users);
            hideModal();
            showToast('Komentar terkirim!');
        }
        // ===== DUNIA & UTILITIES =====
        function initDuniaPage() {
            if (!currentUser) return showPage('login');
            const d = getUserData(currentUser);
            document.getElementById('profileUsername').textContent = `@${currentUser}`;
            const joinDate = new Date(d.created).toLocaleDateString('id-ID', { day: 'numeric', month: 'long', year: 'numeric' });
            document.getElementById('profileJoinDate').textContent = `Bergabung: ${joinDate}`;
            const postCount = (d.rants?.length || 0) + (d.artefacts?.length || 0);
            document.getElementById('profileActivity').textContent = `Aktivitas: ${postCount} posting`;
        }
        function showModal(content) {
            document.querySelector('.modal').innerHTML = content;
            document.getElementById('modalOverlay').classList.add('active');
        }
        function hideModal() {
            document.getElementById('modalOverlay').classList.remove('active');
        }
        function viewRantDetails(rant) {
            const date = new Date(rant.date).toLocaleDateString('id-ID', { day: 'numeric', month: 'long', year: 'numeric', hour: '2-digit', minute: '2-digit' });
            showModal(`
                <div class="modal-header">
                    <div class="modal-title">Rant</div>
                    <button class="modal-close" onclick="hideModal()">√ó</button>
                </div>
                <div style="margin-bottom:15px;color:rgba(255,255,255,0.6);font-size:12px;">${date} ‚Ä¢ ${rant.hashtag || ''}</div>
                <div style="color:rgba(255,255,255,0.9);line-height:1.6;font-size:14px;white-space:pre-wrap;">${rant.content}</div>
                <button class="action-btn secondary" onclick="hideModal()" style="margin-top:20px;">Tutup</button>
            `);
        }
        function viewArtefakDetails(index) {
            const d = getUserData(currentUser);
            if (!d.artefacts || !d.artefacts[index]) return;
            const a = d.artefacts[index];
            const date = new Date(a.date).toLocaleDateString('id-ID', { day: 'numeric', month: 'long', year: 'numeric', hour: '2-digit', minute: '2-digit' });
            showModal(`
                <div class="modal-header">
                    <div class="modal-title">Artefak</div>
                    <button class="modal-close" onclick="hideModal()">√ó</button>
                </div>
                <div style="margin-bottom:15px;color:#4903fc;font-size:16px;font-weight:600;">${a.title}</div> <!-- Ganti warna ungu jadi biru #4903fc -->
                <div style="margin-bottom:15px;color:rgba(255,255,255,0.6);font-size:12px;">${date}</div>
                <div style="color:rgba(255,255,255,0.9);line-height:1.6;font-size:14px;white-space:pre-wrap;">${a.content}</div>
                <button class="action-btn secondary" onclick="hideModal()" style="margin-top:20px;">Tutup</button>
            `);
        }
        function viewArtefak(index) { viewArtefakDetails(index); }
        function formatLastActive(timestamp) {
            if (!timestamp) return 'baru bergabung';
            const now = Date.now();
            const diff = now - timestamp;
            const minutes = Math.floor(diff / (1000 * 60));
            const hours = Math.floor(diff / (1000 * 60 * 60));
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            if (minutes < 1) return 'baru saja';
            if (minutes < 60) return `${minutes} menit lalu`;
            if (hours < 24) return `${hours} jam lalu`;
            if (days === 1) return 'kemarin';
            if (days < 7) return `${days} hari lalu`;
            return new Date(timestamp).toLocaleDateString('id-ID');
        }
        function showToast(message) {
            const t = document.createElement('div');
            t.style.cssText = `position:fixed;top:20px;left:50%;transform:translateX(-50%);background:rgba(73, 3, 252, 0.9);color:white;padding:12px 20px;border-radius:8px;font-size:14px;font-weight:500;z-index:10000;animation:fadeIn 0.3s ease;`; /* Ganti warna ungu jadi biru #4903fc */
            t.textContent = message;
            document.body.appendChild(t);
            setTimeout(() => {
                t.style.opacity = '0';
                t.style.transition = 'opacity 0.3s ease';
                setTimeout(() => document.body.removeChild(t), 300);
            }, 3000);
        }
        function exportData() {
            if (!currentUser) return;
            const d = getUserData(currentUser);
            const blob = new Blob([JSON.stringify({ username: currentUser, exportedAt: new Date().toISOString(), userData: d }, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `nope-${currentUser}-${Date.now()}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }
        function logout() {
            if (confirm('Yakin ingin keluar?')) {
                localStorage.removeItem('nope_current_user');
                currentUser = null;
                showPage('login');
            }
        }
        // ===== INITIALIZE =====
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('modalOverlay').addEventListener('click', e => {
                if (e.target === e.currentTarget) hideModal();
            });
            initializeApp();
        });
    </script>
</body>
</html>
